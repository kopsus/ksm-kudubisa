(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1990],{34076:(e,a,t)=>{Promise.resolve().then(t.bind(t,63484))},26764:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(67401).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},19993:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(67401).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},5565:(e,a,t)=>{"use strict";t.d(a,{default:()=>r.a});var l=t(4146),r=t.n(l)},4146:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return s},getImageProps:function(){return d}});let l=t(60306),r=t(40666),i=t(87970),n=l._(t(65514));function d(e){let{props:a}=(0,r.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let s=i.Image},41650:(e,a,t)=>{"use strict";t.d(a,{DD:()=>o,WY:()=>d,d$:()=>n,vc:()=>s});var l=t(93109),r=t(82651),i=t(58257);let n=async()=>(await r.A.get("".concat(l.VY,"/products"))).data,d=async e=>(await i.g.post("".concat(l.VY,"/products"),e)).data,s=async e=>{let{body:a,id:t}=e;return(await i.g.patch("".concat(l.VY,"/products/").concat(t),a)).data},o=async e=>(await i.g.delete("".concat(l.VY,"/products/").concat(e))).data},5745:(e,a,t)=>{"use strict";t.d(a,{g:()=>i});var l=t(547),r=t(41650);let i=()=>{var e;let a=(0,l.I)({queryKey:["product"],queryFn:()=>(0,r.d$)()});return{dataProduct:null===(e=a.data)||void 0===e?void 0:e.data,...a}}},68246:(e,a,t)=>{"use strict";t.d(a,{V:()=>i});var l=t(93109),r=t(82651);let i=async e=>(await r.A.post("".concat(l.VY,"/upload"),e,{headers:{"Content-Type":"multipart/form-data"}})).data},63484:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>L});var l=t(95155),r=t(12115),i=t(45070),n=t(22130),d=t(89789),s=t(19083),o=t(72508),c=t(33900),u=t(73312),h=t(40767),m=t(52083);let v=[{value:"SudahDiPilah",label:"Sudah Di Pilah"},{value:"BelumDiPilah",label:"Belum Di Pilah"}];function p(e){var a,t;let{table:r}=e,i=r.getState().columnFilters.length>0;return(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto",children:[i&&(0,l.jsxs)(u.$,{variant:"outline",onClick:()=>r.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",(0,l.jsx)(h.A,{className:"ml-2 h-4 w-4"})]}),r.getColumn("jenis")&&(0,l.jsx)(m.D,{column:r.getColumn("jenis"),title:"Filter",options:v}),(0,l.jsx)(c.p,{type:"text",placeholder:"Cari Nama",className:"w-[150px] md:w-[250px] border outline-none",value:null!==(t=null===(a=r.getColumn("product_name"))||void 0===a?void 0:a.getFilterValue())&&void 0!==t?t:"",onChange:e=>{var a;return null===(a=r.getColumn("product_name"))||void 0===a?void 0:a.setFilterValue(e.target.value)}})]})})}var g=t(81073);function x(e){var a;let{columns:t,data:i}=e,[c,u]=r.useState([]),[h,m]=r.useState([]),v=(0,d.N4)({data:i,columns:t,state:{sorting:c,columnFilters:h},onSortingChange:u,getCoreRowModel:(0,s.HT)(),getSortedRowModel:(0,s.h5)(),onColumnFiltersChange:m,getFilteredRowModel:(0,s.hM)(),getFacetedUniqueValues:(0,s.oS)(),getFacetedRowModel:(0,s.kQ)(),getPaginationRowModel:(0,s.kW)()});return(0,l.jsxs)(n.Zp,{className:"space-y-4",children:[(0,l.jsx)(p,{table:v}),(0,l.jsxs)(o.XI,{children:[(0,l.jsx)(o.A0,{children:v.getHeaderGroups().map(e=>(0,l.jsx)(o.Hj,{children:e.headers.map((a,t)=>(0,l.jsx)(o.nd,{className:"".concat(t===e.headers.length-1&&"text-right"," bg-gray-800 text-white"),children:a.isPlaceholder?null:(0,d.Kv)(a.column.columnDef.header,a.getContext())},a.id))},e.id))}),(0,l.jsx)(o.BF,{children:(null===(a=v.getRowModel().rows)||void 0===a?void 0:a.length)?v.getRowModel().rows.map(e=>(0,l.jsx)(o.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(o.nA,{children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(o.Hj,{children:(0,l.jsx)(o.nA,{colSpan:t.length,className:"h-24 text-center",children:"Data tidak ditemukan"})})})]}),(0,l.jsx)(g.d,{table:v})]})}var j=t(5565),f=t(46288),w=t(26764),y=t(19993),N=t(94928),C=t(97348);let b=e=>{let{item:a,itemId:t}=e,r=(0,N.Xr)(C.c);return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,l.jsx)(w.A,{size:18,className:"cursor-pointer",onClick:()=>{r({type:"UPDATE",show:!0,data:a})}}),(0,l.jsx)(y.A,{size:18,color:"red",className:"cursor-pointer",onClick:()=>{r({type:"DELETE",show:!0,data:{id:t}})}})]})},A=[{accessorKey:"product_name",header:"Barang",cell:e=>{let{row:a}=e,t=a.original;return(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"min-w-16 max-w-16 h-16 rounded-xl overflow-hidden bg-primary shadow border",children:(0,l.jsx)(j.default,{src:t.image,alt:a.getValue("product_name"),width:64,height:64,sizes:"100vw"})}),(0,l.jsx)("p",{children:a.getValue("product_name")})]})}},{accessorKey:"price",header:"Harga",cell:e=>{let{row:a}=e;return(0,f.J)(a.getValue("price"))}},{accessorKey:"jenis",header:"Penjualan",cell:e=>{var a;let{row:t}=e,r=null===(a=t.original.jenis)||void 0===a?void 0:a.jenisSampah;return(0,l.jsx)("p",{children:r})},filterFn:(e,a,t)=>{var l;let r=null===(l=e.getValue(a))||void 0===l?void 0:l.jenisSampah;return t.includes(r)}},{accessorKey:"Action",header:"Action",cell:e=>{let{row:a}=e,t=a.original,r=a.original.id;return(0,l.jsx)(b,{item:t,itemId:r})}}];var k=t(25848),S=t(5745),E=t(41650);let D=()=>{let{refetch:e}=(0,S.g)(),a=(0,k.n)({mutationKey:["product mutation"],mutationFn:e=>{let{body:a,type:t,id:l}=e;switch(t){case"create":return(0,E.WY)(a);case"update":return(0,E.vc)({body:a,id:l});case"delete":return(0,E.DD)(l)}},onSuccess:()=>{e()}});return{serviceProduct:a.mutateAsync,...a}};var P=t(93397);let V=()=>{let[e,a]=(0,N.fp)(C.c),t=()=>{a(e=>({...e,show:!1}))},{serviceProduct:r}=D(),i=async()=>{var a;await r({type:"delete",id:null===(a=e.data)||void 0===a?void 0:a.id}),t()};return(0,l.jsx)(P.A,{show:"DELETE"===e.type&&e.show,onHide:t,titleDelete:"Hapus item ini dari produk ?",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-5",children:[(0,l.jsx)(u.$,{variant:"outline",onClick:t,children:"Cancel"}),(0,l.jsx)(u.$,{variant:"danger",onClick:i,children:"Delete"})]})})};var _=t(547),F=t(93109),I=t(82651);let R=async()=>(await I.A.get("".concat(F.VY,"/jenis"))).data,M=()=>{var e;let a=(0,_.I)({queryKey:["jenis sampah"],queryFn:()=>R()});return{...a,dataJeniSampah:null===(e=a.data)||void 0===e?void 0:e.data}};var H=t(68246),T=t(37528),q=t(24797);let K=()=>{var e,a,t,i,n,d,s,o,h;let[m,v]=(0,N.fp)(C.c),{previewUrl:p,setPreviewUrl:g,handleImageChange:x}=(0,q.A)(),[f,w]=r.useState(null),y=()=>{v(e=>({...e,show:!1})),g(""),w(null)},b=null!==(s=p||(null===(e=m.data)||void 0===e?void 0:e.image))&&void 0!==s?s:"",A=e=>{let{name:a,value:t}=e.target;v(e=>({...e,data:{...e.data,[a]:"price"===a?parseFloat(t)||0:t}}))},{serviceProduct:k}=D(),{dataJeniSampah:S}=M(),E=async e=>{let a=new FormData;a.append("file",e);try{return(await (0,H.V)(a)).data}catch(e){throw console.error("Error uploading image:",e),Error("Failed to upload image")}},V=async e=>{var a,t,l,r,i,n,d,s;e.preventDefault();let o={image:f?await E(f):null===(a=m.data)||void 0===a?void 0:a.image,product_name:null!==(i=null===(t=m.data)||void 0===t?void 0:t.product_name)&&void 0!==i?i:"",price:null!==(n=null===(l=m.data)||void 0===l?void 0:l.price)&&void 0!==n?n:0,jenisId:null!==(d=null===(r=m.data)||void 0===r?void 0:r.jenisId)&&void 0!==d?d:""};try{"CREATE"===m.type?await k({type:"create",body:o}):await k({type:"update",body:o,id:null===(s=m.data)||void 0===s?void 0:s.id}),y()}catch(e){console.error(e)}};return(0,l.jsx)(P.A,{show:"DELETE"!==m.type&&m.show,onHide:y,title:"".concat("CREATE"===m.type?"Tambah Produk":"Edit Produk"),children:(0,l.jsxs)("form",{onSubmit:V,className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,l.jsx)("div",{className:"w-40 h-40 rounded-xl border bg-white shadow-1 overflow-hidden",children:p||(null===(a=m.data)||void 0===a?void 0:a.image)?(0,l.jsx)(j.default,{src:b,alt:"",width:0,height:0,sizes:"100vw"}):null}),(0,l.jsx)(c.p,{type:"file",name:"image",required:!0,onChange:e=>{var a;x(e);let t=null===(a=e.target.files)||void 0===a?void 0:a[0];w(null!=t?t:null)},className:"max-w-72"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center",children:[(0,l.jsx)("p",{children:"Nama Barang"}),(0,l.jsx)(c.p,{required:!0,placeholder:"Nama Barang",className:"col-span-3",name:"product_name",onChange:A,value:null!==(o=null===(t=m.data)||void 0===t?void 0:t.product_name)&&void 0!==o?o:""})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center",children:[(0,l.jsx)("p",{children:"Harga"}),(0,l.jsx)(c.p,{required:!0,placeholder:"Harga Barang",type:"number",className:"col-span-3",name:"price",onChange:A,value:(null===(i=m.data)||void 0===i?void 0:i.price)!==0&&(null===(n=m.data)||void 0===n?void 0:n.price)||""})]}),(0,l.jsxs)("div",{className:"grid grid-cols-4 items-center",children:[(0,l.jsx)("p",{children:"Jenis Penjualan"}),(0,l.jsx)("div",{className:"col-span-3",children:(0,l.jsxs)(T.l6,{onValueChange:e=>{v(a=>({...a,data:{...a.data,jenisId:e}}))},name:"jenisId",value:null!==(h=null===(d=m.data)||void 0===d?void 0:d.jenisId)&&void 0!==h?h:"",required:!0,children:[(0,l.jsx)(T.bq,{children:(0,l.jsx)(T.yv,{placeholder:"Jenis Penjualan"})}),(0,l.jsx)(T.gC,{children:null==S?void 0:S.map(e=>(0,l.jsx)(T.eb,{value:e.id,children:e.jenisSampah},e.id))})]})})]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(u.$,{type:"submit",children:"Simpan"})})]})})},L=()=>{let e=(0,N.Xr)(C.c),{dataProduct:a,isLoading:t}=(0,S.g)();return t?(0,l.jsx)("p",{children:"LOADING...."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.A,{pageName:"Produk",onClick:()=>{e({type:"CREATE",show:!0,data:null})}}),(0,l.jsx)(x,{columns:A,data:null!=a?a:[]}),(0,l.jsx)(V,{}),(0,l.jsx)(K,{})]})}},45070:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var l=t(95155),r=t(73312);let i=e=>{let{pageName:a,onClick:t}=e;return(0,l.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:a}),(0,l.jsxs)(r.$,{onClick:t,children:["Tambah ",a]})]})}},24797:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var l=t(12115);let r=()=>{let[e,a]=(0,l.useState)("");return{previewUrl:e,setPreviewUrl:a,handleImageChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){let e=URL.createObjectURL(l);return a(e),()=>URL.revokeObjectURL(e)}a("")}}}}},e=>{var a=a=>e(e.s=a);e.O(0,[970,3072,547,486,3809,7970,8426,9992,2855,5078,3903,4542,8441,1517,7358],()=>a(34076)),_N_E=e.O()}]);