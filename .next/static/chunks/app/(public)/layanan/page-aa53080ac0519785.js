(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9746],{50963:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,44839,23)),Promise.resolve().then(t.bind(t,95838)),Promise.resolve().then(t.bind(t,26736)),Promise.resolve().then(t.bind(t,95976)),Promise.resolve().then(t.bind(t,55824))},14505:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(67401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5565:(e,a,t)=>{"use strict";t.d(a,{default:()=>i.a});var r=t(4146),i=t.n(r)},76046:(e,a,t)=>{"use strict";var r=t(66658);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},4146:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return l},getImageProps:function(){return d}});let r=t(60306),i=t(40666),n=t(87970),s=r._(t(65514));function d(e){let{props:a}=(0,i.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let l=n.Image},58257:(e,a,t)=>{"use strict";t.d(a,{g:()=>s});var r=t(93109),i=t(82651),n=t(13030);let s=i.A.create({baseURL:r.VY,withCredentials:!0});s.interceptors.request.use(async e=>{let a=(0,n.getCookie)("token");return a&&e.headers&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e))},41650:(e,a,t)=>{"use strict";t.d(a,{DD:()=>c,WY:()=>d,d$:()=>s,vc:()=>l});var r=t(93109),i=t(82651),n=t(58257);let s=async()=>(await i.A.get("".concat(r.VY,"/products"))).data,d=async e=>(await n.g.post("".concat(r.VY,"/products"),e)).data,l=async e=>{let{body:a,id:t}=e;return(await n.g.patch("".concat(r.VY,"/products/").concat(t),a)).data},c=async e=>(await n.g.delete("".concat(r.VY,"/products/").concat(e))).data},5745:(e,a,t)=>{"use strict";t.d(a,{g:()=>n});var r=t(547),i=t(41650);let n=()=>{var e;let a=(0,r.I)({queryKey:["product"],queryFn:()=>(0,i.d$)()});return{dataProduct:null===(e=a.data)||void 0===e?void 0:e.data,...a}}},71963:(e,a,t)=>{"use strict";t.d(a,{AF:()=>c,I0:()=>s,Uw:()=>o,VG:()=>d,zS:()=>l});var r=t(93109),i=t(82651),n=t(58257);let s=async()=>(await i.A.get("".concat(r.VY,"/transactions"))).data,d=async e=>(await i.A.get("".concat(r.VY,"/transactions/").concat(e))).data,l=async e=>(await i.A.post("".concat(r.VY,"/transactions"),e)).data,c=async e=>{let{body:a,id:t}=e;return(await n.g.patch("".concat(r.VY,"/transactions/").concat(t),a)).data},o=async e=>(await n.g.delete("".concat(r.VY,"/transactions/").concat(e))).data},14240:(e,a,t)=>{"use strict";t.d(a,{P:()=>s});var r=t(25848),i=t(45892),n=t(71963);let s=()=>{let{refetch:e}=(0,i.E)(),a=(0,r.n)({mutationKey:["transaction mutation"],mutationFn:e=>{let{body:a,type:t,id:r}=e;if("create"===t&&a)return(0,n.zS)(a);if("update"===t&&a&&r)return(0,n.AF)({body:a,id:r});if("delete"===t&&r)return(0,n.Uw)(r);throw Error("Invalid input data for mutation")},onSuccess:()=>{e()}});return{serviceTransaction:a.mutateAsync,...a}}},45892:(e,a,t)=>{"use strict";t.d(a,{E:()=>s,R:()=>d});var r=t(547),i=t(71963),n=t(76046);let s=()=>{var e;let a=(0,r.I)({queryKey:["transaksi"],queryFn:()=>(0,i.I0)()});return{dataTransactions:null===(e=a.data)||void 0===e?void 0:e.data,...a}},d=()=>{var e;let{id:a}=(0,n.useParams)(),t=(0,r.I)({queryKey:["detail transaksi",{id:a}],queryFn:()=>(0,i.VG)(a),enabled:!!a});return{detailTransaction:null===(e=t.data)||void 0===e?void 0:e.data,...t}}},29513:(e,a,t)=>{"use strict";t.d(a,{CK:()=>l,E$:()=>s,Kh:()=>c,by:()=>d,lo:()=>n});var r=t(93109),i=t(58257);let n=async()=>(await i.g.get("".concat(r.VY,"/users"))).data,s=async()=>(await i.g.get("".concat(r.VY,"/profile"))).data,d=async e=>(await i.g.post("".concat(r.VY,"/auth/register"),e)).data,l=async e=>{let{body:a,id:t}=e;return(await i.g.patch("".concat(r.VY,"/users/").concat(t),a)).data},c=async e=>(await i.g.delete("".concat(r.VY,"/users/").concat(e))).data},40454:(e,a,t)=>{"use strict";t.d(a,{B:()=>l,I:()=>d});var r=t(547),i=t(29513),n=t(94928),s=t(67985);let d=()=>{var e;let a=(0,r.I)({queryKey:["users"],queryFn:()=>(0,i.lo)()});return{...a,dataUsers:null===(e=a.data)||void 0===e?void 0:e.data}},l=()=>{var e;let a=(0,n.md)(s.r),t=(0,r.I)({queryKey:["profile"],queryFn:()=>(0,i.E$)(),enabled:a});return{...t,dataProfile:null===(e=t.data)||void 0===e?void 0:e.data}}},83456:(e,a,t)=>{"use strict";t.d(a,{L:()=>o});var r=t(95155),i=t(46288),n=t(5565),s=t(12115),d=t(73312),l=t(94928),c=t(94472);let o=e=>{let{id:a,img:t,name:o,price:u}=e,[A,h]=s.useState({}),[m,g]=(0,l.fp)(c.Y);s.useEffect(()=>{var e,a;if((null===(e=m.data)||void 0===e?void 0:e.length)===0)h({});else{let e={};null===(a=m.data)||void 0===a||a.forEach(a=>{e[a.id]=a.quantity||0}),h(e)}},[m.data]);let v=e=>{h(a=>({...a,[e]:(a[e]||0)+1})),g(a=>{var r,i;return(null===(r=a.data)||void 0===r?void 0:r.find(a=>a.id===e))?{data:null===(i=a.data)||void 0===i?void 0:i.map(a=>a.id===e?{...a,quantity:(a.quantity||0)+1}:a)}:{data:[...a.data||[],{id:e,image:t,product_name:o,price:u,quantity:1}]}})},p=e=>{h(a=>({...a,[e]:Math.max((a[e]||0)-1,0)})),g(a=>{var t;return{data:null===(t=a.data)||void 0===t?void 0:t.map(a=>a.id===e?{...a,quantity:Math.max((a.quantity||1)-1,0)}:a).filter(e=>e.quantity>0)}})};return(0,r.jsxs)("div",{className:"grid grid-cols-2 items-start justify-start gap-5",children:[(0,r.jsx)("div",{className:"rounded-xl overflow-hidden shadow-md border w-full h-32",children:(0,r.jsx)(n.default,{src:t,alt:o,width:0,height:0,sizes:"100vw"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{children:o}),(0,r.jsxs)("p",{className:"titleContent text-danger",children:[(0,i.J)(u)," / kg"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.$,{size:"sm",onClick:()=>p(a),className:"bg-primary",children:"-"}),(0,r.jsx)(d.$,{variant:"outline",disabled:!0,children:A[a]||0}),(0,r.jsx)(d.$,{size:"sm",onClick:()=>v(a),className:"bg-primary",children:"+"})]})]})]})}},26736:(e,a,t)=>{"use strict";t.d(a,{Cart:()=>m});var r=t(95155);t(12115);var i=t(73312),n=t(5565),s=t(94928),d=t(94472),l=t(46288),c=t(14240),o=t(40454),u=t(67985),A=t(76046),h=t(14505);let m=()=>{var e,a,t,m;let[g,v]=(0,s.fp)(d.Y),p=(0,s.md)(u.r),{refetch:x}=(0,o.B)(),y=(0,A.useRouter)(),{serviceTransaction:f,isPending:b}=(0,c.P)(),j=async e=>{var a;if(e.preventDefault(),!p){alert("login terlebih dahulu"),y.push("/login");return}if(!g.data||0===g.data.length)return alert("Pilih produk yang akan dijual terlebih dahulu");let t={TransaksiProduk:null===(a=g.data)||void 0===a?void 0:a.map(e=>e.id?{produkId:e.id,quantity:e.quantity||0}:null).filter(e=>null!==e)};201===(await f({type:"create",body:t})).status&&(v({data:[]}),alert("anda berhasil menjual sampah"),y.push("/profile")),x()};return(0,r.jsxs)("div",{className:"flex flex-col gap-5 sticky top-20",children:[(0,r.jsx)("p",{className:"titleSection",children:"Rincian Penjualan"}),(0,r.jsx)("div",{className:"border-2 border-primary overflow-hidden rounded-xl shadow-md",children:(0,r.jsxs)("table",{className:"w-full overflow-x-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-primary text-white",children:["Barang","Jumlah"].map(e=>(0,r.jsx)("th",{className:"p-2 text-start",children:e},e))})}),(0,r.jsx)("tbody",{children:g.data&&g.data.length>0?g.data.map((e,a)=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"p-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-primary shadow border",children:(0,r.jsx)(n.default,{src:null!==(t=e.image)&&void 0!==t?t:"",alt:"products",width:0,height:0,sizes:"100vw"})}),(0,r.jsx)("p",{children:e.product_name})]})}),(0,r.jsx)("td",{className:"p-2",children:(0,r.jsx)(i.$,{variant:"outline",size:"sm",disabled:!0,children:(0,l.J)(e.quantity*e.price)})})]},a)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:2,className:"text-center p-2 text-danger",children:"Silahkan pilih sampah yang akan dijual"})})})]})}),(0,r.jsxs)("div",{className:"border-2 border-primary overflow-hidden rounded-xl shadow-md p-2",children:[(0,r.jsx)("p",{className:"titleContent text-primary border-b-2 border-primary pb-2",children:"Total"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 justify-center mt-5",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"titleContent text-primary",children:null===(e=g.data)||void 0===e?void 0:e.length}),(0,r.jsx)("p",{children:"Barang"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"titleContent text-primary",children:[null===(a=g.data)||void 0===a?void 0:a.reduce((e,a)=>e+(a.quantity||0),0)," ","kg"]}),(0,r.jsx)("p",{children:"Kg"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"titleContent text-primary",children:(0,l.J)(null!==(m=null===(t=g.data)||void 0===t?void 0:t.reduce((e,a)=>e+a.price*((null==a?void 0:a.quantity)||0),0))&&void 0!==m?m:0)}),(0,r.jsx)("p",{children:"Harga"})]})]})]}),(0,r.jsx)(i.$,{variant:"danger",onClick:j,children:b?(0,r.jsx)(h.A,{}):"JUAL SAMPAH"})]})}},95976:(e,a,t)=>{"use strict";t.d(a,{SampahBelumDipilah:()=>s});var r=t(95155);t(12115);var i=t(83456),n=t(5745);let s=()=>{let{dataProduct:e}=(0,n.g)();return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"titleContent w-max border-b-2 border-primary pb-2 mb-5",children:"Sampah Belum Dipilah"}),(0,r.jsx)("p",{className:"text-neutral-400 mb-5",children:"*Sampah yang belum dipilah memiliki nilai jual yang lebih rendah"}),(0,r.jsx)("div",{className:"grid lg:grid-cols-2 gap-5 w-full",children:null==e?void 0:e.map((e,a)=>{var t;return(null===(t=e.jenis)||void 0===t?void 0:t.jenisSampah)==="BelumDiPilah"&&(0,r.jsx)(i.L,{id:e.id,img:e.image,name:e.product_name,price:e.price},a)})})]})}},55824:(e,a,t)=>{"use strict";t.d(a,{SampahSudahDipilah:()=>s});var r=t(95155);t(12115);var i=t(83456),n=t(5745);let s=()=>{let{dataProduct:e}=(0,n.g)();return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"titleContent w-max border-b-2 border-primary pb-2 mb-5",children:"Sampah Sudah Dipilah"}),(0,r.jsx)("div",{className:"grid lg:grid-cols-2 gap-5 w-full min-h-40 max-h-96 overflow-y-auto",style:{scrollbarWidth:"none"},children:null==e?void 0:e.map((e,a)=>{var t;return(null===(t=e.jenis)||void 0===t?void 0:t.jenisSampah)==="SudahDiPilah"&&(0,r.jsx)(i.L,{id:e.id,img:e.image,name:e.product_name,price:e.price},a)})})]})}},73312:(e,a,t)=>{"use strict";t.d(a,{$:()=>c});var r=t(95155),i=t(12115),n=t(12317),s=t(31027),d=t(21567);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-zinc-300",{variants:{variant:{default:"bg-primary text-zinc-50 shadow hover:bg-primary/90 dark:bg-primary dark:text-zinc-900 dark:hover:bg-primary/90",danger:"bg-danger text-zinc-50 shadow hover:bg-danger/90 dark:bg-danger dark:text-zinc-900 dark:hover:bg-danger/90",outline:"text-danger border border-danger shadow hover:bg-danger/90 hover:text-white dark:text-danger dark:hover:bg-danger/90 dar:hover:text-white",ghost:"bg-slate-300 hover:bg-slate-400"},size:{default:"h-9 px-6 py-2",sm:"h-8 rounded-full px-3 text-xs",lg:"h-10 rounded-full px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,a)=>{let{className:t,variant:i,size:s,asChild:c=!1,...o}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,d.cn)(l({variant:i,size:s,className:t})),ref:a,...o})});c.displayName="Button"},93109:(e,a,t)=>{"use strict";t.d(a,{It:()=>i,VY:()=>r}),new(t(11094)).PrismaClient;let r="http://localhost:3000/api",i="cm5gvuic20002wxkgn20vevnt"},46288:(e,a,t)=>{"use strict";t.d(a,{J:()=>r,Y:()=>i});let r=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),i=e=>{let a=new Date(e);return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"long",year:"numeric"}).format(a)}},21567:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var r=t(43463),i=t(69795);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.QP)((0,r.$)(a))}},67985:(e,a,t)=>{"use strict";t.d(a,{r:()=>r});let r=(0,t(21416).eU)(!1)},94472:(e,a,t)=>{"use strict";t.d(a,{Y:()=>r});let r=(0,t(21416).eU)({data:[]})},95838:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r={src:"/_next/static/media/highlight.4f1b2f85.jpg",height:1200,width:1600,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAGAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAL/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAAsE//xAAcEAEAAgEFAAAAAAAAAAAAAAACAwQAAQUSIVL/2gAIAQEAAT8AOxUVdi0PIpmSZdeVn//EABcRAAMBAAAAAAAAAAAAAAAAAAABIRL/2gAIAQIBAT8AypD/xAAWEQEBAQAAAAAAAAAAAAAAAAABAgD/2gAIAQMBAT8Aqkp3/9k=",blurWidth:8,blurHeight:6}}},e=>{var a=a=>e(e.s=a);e.O(0,[970,3072,547,486,7970,4839,8441,1517,7358],()=>a(50963)),_N_E=e.O()}]);