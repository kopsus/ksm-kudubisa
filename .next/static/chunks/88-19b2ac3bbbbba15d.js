(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{83686:()=>{},32383:()=>{},19993:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(67401).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},71963:(e,a,t)=>{"use strict";t.d(a,{AF:()=>c,I0:()=>l,Uw:()=>o,VG:()=>i,zS:()=>d});var s=t(93109),r=t(82651),n=t(58257);let l=async()=>(await r.A.get("".concat(s.VY,"/transactions"))).data,i=async e=>(await r.A.get("".concat(s.VY,"/transactions/").concat(e))).data,d=async e=>(await r.A.post("".concat(s.VY,"/transactions"),e)).data,c=async e=>{let{body:a,id:t}=e;return(await n.g.patch("".concat(s.VY,"/transactions/").concat(t),a)).data},o=async e=>(await n.g.delete("".concat(s.VY,"/transactions/").concat(e))).data},14240:(e,a,t)=>{"use strict";t.d(a,{P:()=>l});var s=t(25848),r=t(45892),n=t(71963);let l=()=>{let{refetch:e}=(0,r.E)(),a=(0,s.n)({mutationKey:["transaction mutation"],mutationFn:e=>{let{body:a,type:t,id:s}=e;if("create"===t&&a)return(0,n.zS)(a);if("update"===t&&a&&s)return(0,n.AF)({body:a,id:s});if("delete"===t&&s)return(0,n.Uw)(s);throw Error("Invalid input data for mutation")},onSuccess:()=>{e()}});return{serviceTransaction:a.mutateAsync,...a}}},45892:(e,a,t)=>{"use strict";t.d(a,{E:()=>l,R:()=>i});var s=t(547),r=t(71963),n=t(76046);let l=()=>{var e;let a=(0,s.I)({queryKey:["transaksi"],queryFn:()=>(0,r.I0)()});return{dataTransactions:null===(e=a.data)||void 0===e?void 0:e.data,...a}},i=()=>{var e;let{id:a}=(0,n.useParams)(),t=(0,s.I)({queryKey:["detail transaksi",{id:a}],queryFn:()=>(0,r.VG)(a),enabled:!!a});return{detailTransaction:null===(e=t.data)||void 0===e?void 0:e.data,...t}}},29513:(e,a,t)=>{"use strict";t.d(a,{CK:()=>d,E$:()=>l,Kh:()=>c,by:()=>i,lo:()=>n});var s=t(93109),r=t(58257);let n=async()=>(await r.g.get("".concat(s.VY,"/users"))).data,l=async()=>(await r.g.get("".concat(s.VY,"/profile"))).data,i=async e=>(await r.g.post("".concat(s.VY,"/auth/register"),e)).data,d=async e=>{let{body:a,id:t}=e;return(await r.g.patch("".concat(s.VY,"/users/").concat(t),a)).data},c=async e=>(await r.g.delete("".concat(s.VY,"/users/").concat(e))).data},40454:(e,a,t)=>{"use strict";t.d(a,{B:()=>d,I:()=>i});var s=t(547),r=t(29513),n=t(94928),l=t(67985);let i=()=>{var e;let a=(0,s.I)({queryKey:["users"],queryFn:()=>(0,r.lo)()});return{...a,dataUsers:null===(e=a.data)||void 0===e?void 0:e.data}},d=()=>{var e;let a=(0,n.md)(l.r),t=(0,s.I)({queryKey:["profile"],queryFn:()=>(0,r.E$)(),enabled:a});return{...t,dataProfile:null===(e=t.data)||void 0===e?void 0:e.data}}},78669:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(95155),r=t(14240),n=t(93397),l=t(73312),i=t(97348),d=t(94928);t(12115);let c=()=>{let[e,a]=(0,d.fp)(i.c),t=()=>{a(e=>({...e,show:!1}))},{serviceTransaction:c}=(0,r.P)(),o=async()=>{await c({type:"delete",id:e.data}),t()};return(0,s.jsx)(n.A,{show:"DELETE"===e.type&&e.show,onHide:t,titleDelete:"Hapus item ini dari Transaksi ?",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-5",children:[(0,s.jsx)(l.$,{variant:"outline",onClick:t,children:"Cancel"}),(0,s.jsx)(l.$,{variant:"danger",onClick:o,children:"Delete"})]})})}},10508:(e,a,t)=>{"use strict";t.d(a,{e:()=>v});var s=t(95155),r=t(46263),n=t(25121),l=t(73312),i=t(46288),d=t(67401);let c=(0,d.A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),o=(0,d.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var u=t(19993),p=t(57485),m=t(97348),h=t(94928),g=t(76046),x=t(40454);function f(e){let{itemId:a}=e,{dataProfile:t}=(0,x.B)(),r=(0,h.Xr)(m.c),n=(0,g.useRouter)();return(0,s.jsxs)(p.rI,{children:[(0,s.jsx)(p.ty,{asChild:!0,children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(l.$,{variant:"ghost",className:"rounded bg-transparent hover:bg-slate-50 flex h-8 w-8 p-0",children:(0,s.jsx)(c,{})})})}),(0,s.jsxs)(p.SQ,{align:"end",className:"w-[160px]",children:[(0,s.jsxs)(p._2,{onClick:()=>{n.push(a)},children:["Detail",(0,s.jsx)(p.V0,{children:(0,s.jsx)(o,{size:16})})]}),(null==t?void 0:t.role.role)==="Admin"&&(0,s.jsxs)(p._2,{onClick:()=>{r({type:"DELETE",show:!0,data:a})},children:["Delete",(0,s.jsx)(p.V0,{children:(0,s.jsx)(u.A,{size:16,color:"red"})})]})]})]})}let v=[{accessorKey:"user",header:"Nama",cell:e=>{let{row:a}=e,t=a.original.user.namaLengkap;return(0,s.jsx)("p",{className:"text-nowrap",children:t})},filterFn:(e,a)=>e.original.user.namaLengkap.toLowerCase().includes(a.toLowerCase())},{accessorKey:"rt",header:()=>(0,s.jsx)("p",{className:"text-nowrap",children:"RT / RW"}),cell:e=>{let{row:a}=e,t=a.original.user.rt,r=a.original.user.rw;return(0,s.jsxs)("p",{children:[t," / ",r]})}},{accessorKey:"TransaksiProduk",header:"Barang",cell:e=>{let{row:a}=e,t=a.getValue("TransaksiProduk");return t&&0!==t.length?(0,s.jsx)("ul",{className:"flex flex-col gap-2",children:t.map((e,a)=>{var t;return(0,s.jsx)("li",{children:null===(t=e.produk)||void 0===t?void 0:t.product_name},a)})}):(0,s.jsx)("p",{children:"Belum ada barang"})}},{header:"Total",cell:e=>{let{row:a}=e,t=a.getValue("TransaksiProduk");if(!t||0===t.length)return(0,s.jsx)("p",{children:"Rp 0"});let r=t.reduce((e,a)=>{var t;return e+(null!==(t=a.quantity)&&void 0!==t?t:0)*a.produk.price},0);return(0,s.jsx)(l.$,{variant:"outline",size:"sm",children:(0,i.J)(r)})}},{accessorKey:"statusUser",header:()=>(0,s.jsx)("p",{className:"text-nowrap",children:"Status Agen"}),cell:e=>{let{row:a}=e,t=a.getValue("statusUser"),l=r.D.find(e=>e.value===a.getValue("statusUser"));return l?(0,s.jsx)(n.E,{variant:"Paid"===t?"default":"Process"===t?"process":"Failed"===t?"failed":"pending",children:(0,s.jsx)("span",{children:l.label})}):null},filterFn:(e,a,t)=>t.includes(e.getValue(a))},{accessorKey:"statusAgen",header:()=>(0,s.jsx)("p",{className:"text-nowrap",children:"Status Pengepul"}),cell:e=>{let{row:a}=e,t=a.getValue("statusAgen"),l=r.D.find(e=>e.value===a.getValue("statusAgen"));return l?(0,s.jsx)(n.E,{variant:"Paid"===t?"default":"Process"===t?"process":"Failed"===t?"failed":"pending",children:(0,s.jsx)("span",{children:l.label})}):null},filterFn:(e,a,t)=>t.includes(e.getValue(a))},{accessorKey:"createdAt",header:"Tanggal",cell:e=>{let{row:a}=e;return(0,s.jsx)("p",{children:(0,i.Y)(a.getValue("createdAt"))})}},{accessorKey:"Action",header:"Action",cell:e=>{let{row:a}=e,t=a.original.id;return(0,s.jsx)(f,{itemId:t})}}]},4194:(e,a,t)=>{"use strict";t.d(a,{b:()=>y});var s=t(95155),r=t(12115),n=t(22130),l=t(89789),i=t(19083),d=t(72508),c=t(33900),o=t(73312),u=t(40767),p=t(52083),m=t(46263),h=t(37528),g=t(7660),x=t(46288);function f(e){var a,t;let{table:r}=e,n=r.getState().columnFilters.length>0,l=e=>{var a;null===(a=r.getColumn("createdAt"))||void 0===a||a.setFilterValue(a=>"string"==typeof a&&(new Date(a).getMonth()+1).toString()===e)};return(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto",children:[n&&(0,s.jsxs)(o.$,{variant:"outline",onClick:()=>r.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",(0,s.jsx)(u.A,{className:"ml-2 h-4 w-4"})]}),(0,s.jsx)(o.$,{onClick:()=>{let e=r.getRowModel().rows.map(e=>{let a=e.original;return{Nama:a.user.namaLengkap,"RT / RW":"".concat(a.user.rt," / ").concat(a.user.rw),Barang:a.TransaksiProduk.map(e=>e.produk.product_name).join(", "),Berat:a.TransaksiProduk.map(e=>e.quantity).join(", "),"Harga / Kg":a.TransaksiProduk.map(e=>e.produk.price).join(", "),Total:a.TransaksiProduk.reduce((e,a)=>{var t;return e+(null!==(t=a.quantity)&&void 0!==t?t:0)*a.produk.price},0),"Status User":a.statusUser,"Status Agen":a.statusAgen,createdAt:(0,x.Y)(a.createdAt)}}),a=g.Wp.json_to_sheet(e),t=g.Wp.book_new();g.Wp.book_append_sheet(t,a,"Transaksi"),g._h(t,"Transaksi.xlsx")},className:"bg-green-500 text-white rounded hover:bg-green-600",children:"Export to Excel"}),(0,s.jsxs)(h.l6,{onValueChange:e=>l(e),children:[(0,s.jsx)(h.bq,{className:"w-max",children:(0,s.jsx)(h.yv,{placeholder:"Pilih Bulan"})}),(0,s.jsx)(h.gC,{children:Array.from({length:12},(e,a)=>(0,s.jsx)(h.eb,{value:(a+1).toString(),children:new Date(0,a).toLocaleString("id-ID",{month:"long"})},a))})]}),r.getColumn("statusUser")&&(0,s.jsx)(p.D,{column:r.getColumn("statusUser"),title:"Status",options:m.D}),(0,s.jsx)(c.p,{type:"text",placeholder:"Cari Nama",className:"w-[150px] md:w-[250px] border outline-none",value:null!==(t=null===(a=r.getColumn("user"))||void 0===a?void 0:a.getFilterValue())&&void 0!==t?t:"",onChange:e=>{var a;return null===(a=r.getColumn("user"))||void 0===a?void 0:a.setFilterValue(e.target.value)}})]})})}var v=t(81073);function y(e){var a;let{columns:t,data:c}=e,[o,u]=r.useState([]),[p,m]=r.useState([]),h=(0,l.N4)({data:c,columns:t,state:{sorting:o,columnFilters:p},onSortingChange:u,getCoreRowModel:(0,i.HT)(),getSortedRowModel:(0,i.h5)(),onColumnFiltersChange:m,getFilteredRowModel:(0,i.hM)(),getFacetedUniqueValues:(0,i.oS)(),getFacetedRowModel:(0,i.kQ)(),getPaginationRowModel:(0,i.kW)()});return(0,s.jsxs)(n.Zp,{className:"space-y-4 overflow-x-auto",children:[(0,s.jsx)(f,{table:h}),(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:h.getHeaderGroups().map(e=>(0,s.jsx)(d.Hj,{children:e.headers.map((a,t)=>{var r;return(0,s.jsx)(d.nd,{className:"".concat(t===(null===(r=e.headers)||void 0===r?void 0:r.length)-1&&"text-right"," bg-gray-800 text-white"),children:a.isPlaceholder?null:(0,l.Kv)(a.column.columnDef.header,a.getContext())},a.id)})},e.id))}),(0,s.jsx)(d.BF,{children:(null===(a=h.getRowModel().rows)||void 0===a?void 0:a.length)?h.getRowModel().rows.map(e=>(0,s.jsx)(d.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(a=>(0,s.jsx)(d.nA,{className:"py-5",children:(0,l.Kv)(a.column.columnDef.cell,a.getContext())},"".concat(e.id,"-").concat(a.id)))},e.id)):(0,s.jsx)(d.Hj,{children:(0,s.jsx)(d.nA,{colSpan:t.length,className:"h-24 text-center",children:"Data tidak ditemukan"})})})]}),(0,s.jsx)(v.d,{table:h})]})}},57485:(e,a,t)=>{"use strict";t.d(a,{SQ:()=>p,V0:()=>x,_2:()=>m,lp:()=>h,mB:()=>g,rI:()=>o,ty:()=>u});var s=t(95155),r=t(12115),n=t(97016),l=t(46967),i=t(98867),d=t(33565),c=t(21567);let o=n.bL,u=n.l9;n.YJ,n.ZL,n.Pb,n.z6,r.forwardRef((e,a)=>{let{className:t,inset:r,children:i,...d}=e;return(0,s.jsxs)(n.ZP,{ref:a,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-zinc-100 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus:bg-zinc-800 dark:data-[state=open]:bg-zinc-800",r&&"pl-8",t),...d,children:[i,(0,s.jsx)(l.A,{className:"ml-auto"})]})}).displayName=n.ZP.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.G5,{ref:a,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",t),...r})}).displayName=n.G5.displayName;let p=r.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:a,sideOffset:r,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});p.displayName=n.UC.displayName;let m=r.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(n.q7,{ref:a,className:(0,c.cn)("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-xs outline-none transition-colors focus:bg-zinc-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0 dark:focus:bg-zinc-800",r&&"pl-8",t),...l})});m.displayName=n.q7.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,checked:l,...d}=e;return(0,s.jsxs)(n.H_,{ref:a,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",t),checked:l,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=n.H_.displayName,r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(n.hN,{ref:a,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=n.hN.displayName;let h=r.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(n.JU,{ref:a,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});h.displayName=n.JU.displayName;let g=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",t),...r})});g.displayName=n.wv.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("span",{className:(0,c.cn)("ml-auto text-xs tracking-widest opacity-60",a),...t})};x.displayName="DropdownMenuShortcut"},46263:(e,a,t)=>{"use strict";t.d(a,{D:()=>s});let s=[{value:"Pending",label:"Pending"},{value:"Process",label:"Process"},{value:"Paid",label:"Paid"},{value:"Failed",label:"Failed"}]},67985:(e,a,t)=>{"use strict";t.d(a,{r:()=>s});let s=(0,t(21416).eU)(!1)}}]);